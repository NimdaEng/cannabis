<!DOCTYPE html>
<html lang="th">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <style>
   
  </style>
</html>
<body>
<div class="container"> 
<div class="jumbotron d-none">
  <h1 class="display-4">ลงทะเบียนเข้าร่วม โครงการวิจัยน้ำมันกัญชา</h1>
  <p class="lead">อ.เดชา ศิริภัทร</p>
  <hr class="my-5">
    <ul>
      <li>
      <strong class="text-primary">โครงการวิจัยน้ำมันกัญชา อ.เดชา ศิริภัทร  :</strong>   โรงพยาบาลสมเด็จพระยุพราชเดชอุดม เป็น 1 ใน 22 
      โรงพยาบาลที่เข้าร่วมงานวิจัย โดยมีกรมแพทย์แผนไทยและแพทย์ทางเลือก เป็นหน่วยงานหลักในการทำวิจัย 
      (ผ่านการขอจริยธรรมทางการวิจัยในมนุษย์แล้ว)
      </li>
      <li>
      โครงการวิจัยนี้มีห้วงเวลา กันยายน 2562 ถึง สิงหาคม 2563
      </li>
      <li>
      ผู้เข้าร่วมโครงการ ยินดีให้ข้อมูลแก่ ผู้รับผิดชอบ งานวิจัย ตามความเป็นจริง
      </li>
      <li>
      ผู้เข้าร่วมวิจัย <strong class="text-danger my-text">*ต้องมารับบริการด้วยตนเอง ทุกครั้ง *</strong> โดย กำหนด การมาพบแพทย์  4 ครั้ง 
      (ครั้งที่ 1 วันรับการรักษา/ครั้งที่ 2 นัด 3 เดือน / ครั้งที่ 3 นัด 2 เดือน / ครั้งที่ 4 นัด 3 เดือน )
      </li>
      <li>
      ผู้เข้าร่วมงานวิจัย เป็น <strong class="text-danger my-text">ผู้มีภูมิลำเนา ในจังหวัดอุบลราชธานี </strong>
      </li>
    </ul> 
    <hr class="my-4">
    <h1 class="display-5">สิ่งที่ต้องนำมาด้วยในคัดกรอง</h1>    
    <ol>
      <li>บัตรประชาชนของผู้เข้าร่วมโครงการวิจัย</li>
      <li>ทะเบียนบ้าน (ฉบับจริง หรือ สำเนา)</li>
      <li>สำเนาประวัติ หรือ ข้อมูล ประวัติ การวินิจฉัยและรักษาในปัจจุบัน</li>
      <li>
      ผลการตรวจทางห้องปฏิบัติการ ดังนี้  BUN, Cr, TP, Alb, TB, AST,  ALT, ALP, AFP <strong class="text-danger my-text">(ผลตรวจไม่เกิน 1 เดือน สามารถนำผลตรวจ มาจาก รพ.ใกล้บ้านได้)  
      *** ผู้เข้าร่วมโครงการฯ ในอำเภอเดชอุดม  ให้ขอรับการตรวจ ก่อนวันนัด  โดย มีค่าใช้จ่ายตามจริง (ชำระเงินเอง)</strong>
      </li>
      <li>ยาที่ใช้ในปัจจุบัน ทั้งแผนปัจจุบัน และ แผนไทย</li>
    </ol> 
    <hr class="my-4"> 
    <h1 class="display-5">คุณสมบัติของผู้เข้าร่วมโครงการวิจัยเฟส 1</h1>
    <ul>
      <li>อาศัยหรือมีภูมิลำเนา ในจังหวัดอุบลราชธานี</li>
      <li>เพศชายหรือเพศหญิง   อายุตั้งแต่ 25 ปีขึ้นไป</li>
      <li>เป็นผู้ป่วยที่มีอาการหรือเป็นโรคที่แพทย์/แพทย์แผนไทย/แพทย์แผนไทยประยุกต์ ประจำโครงการฯ ของรพร.เดชอุดม กำหนดให้ใช้น้ำมันกัญชา อ.เดชา ได้ </li>
      <li>มีการรับรู้และสติสัมปชัญญะดี สามารถสื่อสารความหหมายได้</li>
      <li>ลงนามในใบยินยอมเร่วมโครงการ หลังได้รับการชี้แจ้งโครงการจากผู้วิจัย</li>
    </ul>
    
    <hr class="my-4"> 
    <h1 class="display-5">กำหนดการประชุม ในวันที่ 4 – 8 พฤศจิกายน 2562</h1>
    <strong class="text-danger my-text">หมายเหตุ ผู้มีสิทธิเข้ารับการตรวจ ต้องผ่านขั้นตอน 
                 ตั้งแต่เวลา 09.00 น. เท่านั้น
</strong>
    <table >
      <tr>
        <td>07.30 - 09.00  น.</td>
        <td>ตรวจเอกสาร/คิวตามการสมัคร *** ไม่รับลงทะเบียนหน้างาน***</td>
      </tr>
      <tr>
        <td>09.00 – 09.30 น.</td>
        <td>ผอ.รพร.เดชอุดม กล่าวเปิดโครงการ</td>
      </tr>
      <tr>
        <td>09.30- 10.00   น.</td>
        <td>ชี้แจงโครงการวิจัยฯ</td>
      </tr>
      <tr>
        <td>10.00 – 11.00 น.</td>
        <td>บรรยายเรื่อง น้ำมันกัญชา</td>
      </tr>
      <tr>
        <td>11 .00 น.</td>
        <td>ผู้สมัครเข้ารับการตรวจ เพื่อ เข้าร่วมโครงการวิจัย ฯ</td>
      </tr>      
    </table>
    <br>
   
    <div class="form-check mb-2 mr-sm-2">
    <label class="form-check-label">
      <input class="form-check-input" type="checkbox"> ข้าพเจ้าได้อ่านครบถ้วนแล้ว
    </label>
  </div>
  <a class="btn btn-success btn-lg" href="#" role="button">อ่านแล้ว</a>
</div>

<div class="line-bottom">
  <h1>ลงทะเบียน</h1>
</div>
<br>
<div class="col-md-6 col-sm-6">
<form>
  <div class="form-group">
    <label for="firstname">ชื่อ</label>
    <input type="text" class="form-control" id="firstname" name="firstname" placeholder="กรอกชื่อ" required  value="ทดสอบชื่อ">    
  </div>
  <div class="form-group">
    <label for="lastname">นามสกุล</label>
    <input type="text" class="form-control" id="lastname" name="lastname" placeholder="นามสกุล" required value="ทดสอบนามสกุล">
  </div>
  <div class="form-group">
    <label for="lastname">บัตรประชาชน</label>
    <input type="text" class="form-control" id="cid" name="cid" value="1111111111119"
    maxlength="13" pattern="[0-9]{13}" title="โปรดกรอกรูปแบบของบัตรประชาชน" 
    placeholder="เลขบัตรประชาชน 13 หลัก" required>
  </div>
  <div class="form-group">
    <label for="lastname">วันเดือนปีเกิด (เป็นตัวเลข)</label>
    <div class="my-box-date">
      วัน
    <input type="number" id="day" name="day" min="1" max="31" maxlength="2" required value="5"
      data-container="body" data-toggle="popover" data-placement="top" 
      data-content="กรุณากรอก 1-31 เท่านั้น">
      เดือน
    <input type="number" id="month" name="month" min="1" max="12" maxlength="2" required value="1"
      data-container="body" data-toggle="popover" data-placement="top" 
      data-content="กรุณากรอก 1-12 เท่านั้น">
      พ.ศ.
    <input type="number" style="width:70px" id="year" name="year" min="2464" max="2537" maxlength="4" required value="2525"
      data-container="body" data-toggle="popover" data-placement="top" 
      data-content="ช่วง พ.ศ. 2464 - 2537 เท่านั้น">

    <label id="age" class="text-success"></label>
    </div>
  </div>

  <hr class="my-4"> 
  <b>โรคประจำตัว ผู้ป่วย 4 กลุ่มโรค ดังนี้</b>  
  
  <div class="form-group form-check">
    <input type="radio" class="form-check-input" id="Cancer" value="โรคมะเร็งทุกชนิด / ทุกระยะ (Cancer)" name="disease"required>
    <label class="form-check-label text-dark" for="Cancer">โรคมะเร็งทุกชนิด / ทุกระยะ (Cancer)</label>
  </div>
  <div class="form-group form-check">
    <input type="radio" class="form-check-input" id="Epilepsy" value="โรคลมชัก(Epilepsy)" name="disease"required>
    <label class="form-check-label text-dark" for="Epilepsy">โรคลมชัก(Epilepsy) </label>
  </div>
  <div class="form-group form-check">
    <input type="radio" class="form-check-input" id="migrain" value="โรคปวดจากปลายประสาท หรือ โรคที่มีอาการปวดรุนแรง เช่น ไมเกรน(migrain) ปลายประสาทใบหน้าอักเสบ (trigeminal nerve pain) เป็นต้น" name="disease">
    <label class="form-check-label text-dark" for="migrain">
      โรคปวดจากปลายประสาท หรือ โรคที่มีอาการปวดรุนแรง เช่น ไมเกรน(migrain) ปลายประสาทใบหน้าอักเสบ (trigeminal nerve pain) เป็นต้น
    </label>
  </div>
  <div class="form-group form-check">
    <input type="radio" class="form-check-input" id="Parkinson" value="พาร์กินสัน (Parkinson’s disease)" name="disease"required checked="checked">
    <label class="form-check-label text-dark" for="Parkinson">พาร์กินสัน (Parkinson’s disease)</label>
  </div>  
 
  <!-- end -->
  <!-- เลือกวันที่รับคัดกรอก -->
  <hr class="my-4"> 
  <b>วันที่ประสงค์เข้าคัดกรอง</b>   
  <div class="form-group form-check">
    <input type="radio" class="form-check-input" id="screening1" value="2019-11-4" name="screening" required checked="checked">
    <label class="form-check-label text-dark" for="screening1">วันที่ 4 พฤศจิกายน 2562 <i id="4" class="text-danger"></i></label>
  </div>
  <div class="form-group form-check">
    <input type="radio" class="form-check-input" id="screening2" value="2019-11-5" name="screening" required>
    <label class="form-check-label text-dark" for="screening2">วันที่ 5 พฤศจิกายน 2562 <i id="5" class="text-danger"></i></label>
  </div>
  <div class="form-group form-check">
    <input type="radio" class="form-check-input" id="screening3" value="2019-11-6" name="screening" required>
    <label class="form-check-label text-dark" for="screening3">วันที่ 6 พฤศจิกายน 2562 <i id="6" class="text-danger"></i></label>
  </div>
  <div class="form-group form-check">
    <input type="radio" class="form-check-input" id="screening4" value="2019-11-7" name="screening" required>
    <label class="form-check-label text-dark" for="screening4">วันที่ 7 พฤศจิกายน 2562 <i id="7" class="text-danger"></i></label>
  </div>
  <div class="form-group form-check">
    <input type="radio" class="form-check-input" id="screening5" value="2019-11-8" name="screening" required>
    <label class="form-check-label text-dark" for="screening5">วันที่ 8 พฤศจิกายน 2562 <i id="8" class="text-danger"></i></label>
  </div> 
  <!-- end -->
  <button type="submit" class="btn btn-primary">Submit</button>
</form>
<br><br>




  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js"></script>

  <script type="text/javascript">
  $( document ).ready(function() {
      $("form").submit(function(event){     
        let field = $( this ).serializeArray();
        console.log(field);
        jQuery.each(field, function(i, field){
          
        });   

        jQuery.ajax({
          cache: false,
          url: "save.php",
          data: field,
          dataType: "json",
          type:"POST",
          //contentType: "application/json; charset=utf-8",
          success: function(data){
            console.log(data);
          },
          error:function(data){
            console.log(data.responseJSON.message);
          }
        }); 
        event.preventDefault();
      });

      $("#cid").keyup(function(){
        if($(this).val().length == 13){
          //console.log($(this).val());
          let id = $(this).val();
          let sum = 0;
          for(i=0; i < 12; i++){
            sum += parseFloat(id.charAt(i))*(13-i);
          }          
          if((11-(sum%11))%10 !== parseFloat(id.charAt(12))){
              //ถ้าเลขบัตรประชาชนไม่ถูก border: 1px solid #dc3545;
              $(this).css("border","2px solid #dc3545");
            }else{
              $(this).css("border","2px solid #28a745");
            }
        }
      });

      let day = "";
      let month = "";      

      $("#day").keyup(function(){
        let val = $(this).val();
        if(val > 31 || val === '0'){
          $(this).val('');
          $($(this).popover('toggle'));
        }else{
          $($(this).popover('hide'));
          day = $(this).val();
        }
      });

      $("#month").keyup(function(){
        let val = $(this).val();
        if(val > 12 || val === '0'){
          $(this).val('');
          $($(this).popover('toggle'));
        }else{
          $($(this).popover('hide'));
          month = $(this).val();
        }
      });
      $("#year").keyup(function(){ //2537,2464
        let val = $(this).val();
        if(val.length > 4 || val === '0') $(this).val('');
        if(!((val >= $(this).attr('min')) && (val <= $(this).attr('max')))){          
          $($(this).popover('toggle'));
        }else{          
          $($(this).popover('hide'));          
            let age = new Date($(this).val() - 543, month, day);          
            $('#age').text(getAge(age));          
        }
      });
  });

  function getAge(dateString) {
    var today = new Date();
    var DOB = new Date(dateString);
    var totalMonths = (today.getFullYear() - DOB.getFullYear()) * 12 + today.getMonth() - DOB.getMonth();
    totalMonths += today.getDay() < DOB.getDay() ? -1 : 0;
    var years = today.getFullYear() - DOB.getFullYear();
    if (DOB.getMonth() > today.getMonth())
        years = years - 1;
    else if (DOB.getMonth() === today.getMonth())
        if (DOB.getDate() > today.getDate())
            years = years - 1;

    var days;
    var months;

    if (DOB.getDate() > today.getDate()) {
        months = (totalMonths % 12);
        if (months == 0)
            months = 11;
        var x = today.getMonth();
        switch (x) {
            case 1:
            case 3:
            case 5:
            case 7:
            case 8:
            case 10:
            case 12: {
                var a = DOB.getDate() - today.getDate();
                days = 31 - a;
                break;
            }
            default: {
                var a = DOB.getDate() - today.getDate();
                days = 30 - a;
                break;
            }
        }

    }
    else {
        days = today.getDate() - DOB.getDate();
        if (DOB.getMonth() === today.getMonth())
            months = (totalMonths % 12);
        else
            months = (totalMonths % 12) + 1;
    }
    var age = years + ' ปี ' + months + ' เดือน ' + days + ' วัน';
    return age;
}

</script>

</body>